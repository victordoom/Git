@model IEnumerable<WebAdmin.Models.Opportunities>

@{
    int id = ViewBag.UserID;
    string pru = id.ToString();
 }

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";

    List<SelectListItem> listItems = new List<SelectListItem>();
    listItems.Add(new SelectListItem
    {
        Text = "~/images/Cold.png",
        Value = "~/images/Cold.png"
    });
    listItems.Add(new SelectListItem
    {
        Text = "~/images/Cold.png",
        Value = "~/images/Cold.png",
        Selected = true
    });
    listItems.Add(new SelectListItem
    {
        Text = "~/images/Hot.png",
        Value = "~/images/Hot.png"
    });



}
<style>
    .customDrowDown {
        -webkit-appearance: none;
        -moz-appearance: none;
        border: 0px;
        background: transparent;
    }

    .uppercase {
        text-transform: uppercase;
    }

    .badge {
        padding: 1px 9px 2px;
        font-size: 12.025px;
        font-weight: bold;
        white-space: nowrap;
        color: #ffffff;
        background-color: #999999;
        -webkit-border-radius: 9px;
        -moz-border-radius: 9px;
        border-radius: 9px;
    }

        .badge:hover {
            color: #ffffff;
            text-decoration: none;
            cursor: pointer;
        }

    .badge-error {
        background-color: #b94a48;
    }

        .badge-error:hover {
            background-color: #953b39;
        }

    .badge-warning {
        background-color: #f89406;
    }

        .badge-warning:hover {
            background-color: #c67605;
        }

    .badge-success {
        background-color: #468847;
    }

        .badge-success:hover {
            background-color: #356635;
        }

    .badge-info {
        background-color: #3a87ad;
    }

        .badge-info:hover {
            background-color: #2d6987;
        }

    .badge-inverse {
        background-color: #333333;
    }

        .badge-inverse:hover {
            background-color: #1a1a1a;
        }

    .custom-loader-color {
        color: #fff !important;
        font-size: 40px !important;
    }

    .custom-loader-background {
        background-color: #f60 !important;
    }

    .custom-middle-align {
        vertical-align: middle !important;
</style>

<input type="hidden" name="memousu" id="memousu" value="@ViewBag.ListaUsu" />

<div class="block-header">
    <h3> <img src="~/images/opportunities.png" class="user-image" alt="User Image" width="90"> Opportunities </h3>    <small class="text-muted">The opportunities registered in the last two months will be displayed here.</small>
</div>

<div class="row">
    <div class="col-md-6">
        <button type="button"
                class="btn btn-default btn-md" data-toggle="modal"
                data-target="#advancedSearchModal"
                id="advancedsearch-button">
            <span class="glyphicon glyphicon-search"
                  aria-hidden="true"></span> Advanced Search
        </button>
    </div>
    <div class="col-md-6">
        
        <p style="text-align:right">
            <a asp-action="Create" class="btn btn-success">Create New</a>
        </p>
    </div>
</div>


<input type="hidden" id="tablaid" name="tablaid" value="@id"/> 
<table id="user@(pru)" class="table  table-condensed  table-hover wrap dt-responsive cell-border compact stripe row-border" style="width:100%">
    <thead>
        <tr>
            <th>ID</th>
            <th>CreatedDate</th>
            <th>Business Name</th>
            <th>OwnerName</th>
            <th>VisitedDate</th>
            <th>Registration By</th>
            <th>Category</th>
            <th>HowFound</th>
            <th>Status</th>
            <th>Lead#</th>
            <th>TimeZone</th>
            <th>Rating</th>
            <th>FollowUp</th>
            @*<th>ClosingReasonID</th>*@
            

        </tr>
    </thead>
    <tfoot>

    </tfoot>
</table>


@* modal busqueda avanzada *@
<div class="modal fade" id="advancedSearchModal"
     tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel"
     aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Advanced Search</h4>
            </div>

            <div class="modal-body">
                <div class="form-horizontal">
                    <hr />

                    <div class="form-group" id="listausu">
                        <label class=" col-lg-4 control-label">By </label>
                        <div class="col-lg-8">
                            <input type="hidden" id="Esadmin" name="Esadmin" value="@ViewBag.Esadmin" />
                            <select id="user" class="btn btn-primary dropdown-toggle" type="button" asp-items="@ViewBag.DDLUsers" data-toggle="dropdown" style="width:80%;">
                                <option value="">All</option>
                            </select>

                        </div>
                    </div>

                    <div class="form-group">
                        <label class=" col-lg-4 control-label">Category</label>
                        <div class="col-lg-8">

                            <select id="category" class="btn btn-primary dropdown-toggle" type="button" asp-items="@ViewBag.DDLCategories" data-toggle="dropdown" style="width:80%;">
                                <option value="">All</option>
                            </select>

                        </div>
                    </div>

                    <div class="form-group">
                        <label class=" col-lg-4 control-label">HowFound</label>
                        <div class="col-lg-8">

                            <select id="howfound" class="btn btn-primary dropdown-toggle" type="button" asp-items="@ViewBag.DDLHowFound" data-toggle="dropdown" onchange="mostrarLeadonline();" style="width:80%;">
                                <option value="">All</option>
                            </select>

                        </div>


                    </div>
                    <div class="form-group" id="LeadOnline">
                        <label class=" col-lg-4 control-label">Follows</label>
                        <div class="col-lg-8">
                            <button id="mif0" class="btn btn-danger ">F0</button>
                            <button id="mif1" class="btn btn-danger ">F1</button>
                            <button id="mif2" class="btn btn-danger ">F2</button>
                            <button id="mif3" class="btn btn-danger ">F3</button>
                            <button id="mif4" class="btn btn-danger ">F4</button>
                            <button id="mif5" class="btn btn-danger ">F5</button>
                        </div>
                        <input type="hidden" id="F1" name="F1" value="prueba" />

                    </div>
                    <div class="form-group">
                        <label class=" col-lg-4 control-label">Rating</label>
                        <div class="col-lg-8">

                            <select id="rating" class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" style="width:80%;">
                                <option value="">All</option>
                                <option value="Cold">Cold</option>
                                <option value="Hot">Hot</option>
                                <option value="Warm">Warm</option>

                            </select>

                        </div>
                    </div>

                    <div class="form-group">
                        <label class=" col-lg-4 control-label">Status</label>
                        <div class="col-lg-8">


                            <select id="status" class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" style="width:80%;">
                                <option value="">All</option>
                                <option value="0">Open</option>
                                <option value="1">Closed</option>


                            </select>

                        </div>
                    </div>
                    <div class="form-group" id="ReasonFilter">
                        <label class=" col-lg-4 control-label">Reason</label>
                        <div class="col-lg-8">


                            <select id="SelectReasonFilter" name="SelectReason" class="form-control" asp-items="ViewBag.ClosingReason" style="width:80%;" ></select>


                            

                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-warning" onclick="reset()">Reset</button>
                <button onclick="SelectUsuario()"
                        type="button" class="btn btn-default btn-success"
                        data-dismiss="modal">
                    Search
                </button>
                <button id="btnCancel" type="button"
                        class="btn btn-default" data-dismiss="modal">
                    Cancel
                </button>
            </div>

        </div>
    </div>
</div>





<!-- Modal -->
<div class="modal fade" id="opportunitiesclosed" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="background: #01DF3A; color: white;">
                <h5 class="modal-title">
                    Opportunity Close
                    <span id="titleid" style="float:right;"></span>
                </h5>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <label>Are you sure to close?</label>
                <select id="SelectReason" name="SelectReason" class="form-control" asp-items="ViewBag.ClosingReason" style="width:50%;"></select>
                <label>Comment </label>
                <form>
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <input type="hidden" id="IdUser" name="IdUser" value="@ViewBag.UserID" />
                    <input type="hidden" id="Id" name="Id" />


                    <textarea name="ClosedComment" id="ClosedComment" class="form-control" style="height: 30%; "></textarea>

                </form>
            </div>
            <div class="modal-footer">
                
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary btn-info" onclick=" CerrarOppor('Opportunities/ClosedOpportunities')">OK</button>
            </div>
        </div>
    </div>
</div>



<script type="text/javascript" src="~/js/Opportunities.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
<script src="~/js/Oppor.js"></script>